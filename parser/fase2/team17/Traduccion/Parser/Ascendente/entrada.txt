begin
    tax := subtotal * 0.06;
    my_recoser_id := 20;
    SELECT table1.column1 INTO STRICT lol FROM table1;
    insert into tblibrosalario values(4,2020,10,2500,6885) RETURNING col1,col2, into var1;
    insert into tblibrosalario values(4,2020,10,2500,6885) RETURNING col1,col2 into var1;
    insert into tblibrosalario values(4,2020,10,2500,6885) RETURNING col1,col2 into  strict var1;
    update tbventa set ventaregistrada = true where idempleado = 4 and fechaventa between '2020-10-01' and '2020-10-31'RETURNING col1,col2 into var1;
    update tbventa set ventaregistrada = true where idempleado = 4 and fechaventa between '2020-10-01' and '2020-10-31'RETURNING col1,col2 into strict var1;
    delete from tbfuncionesmath where idfuncion = 1 RETURNING col1,col2 into var1;
end;
CREATE INDEX test3_desc_index 	ON test3 (id DESC NULLS LAST, id DESC NULLS LAST);

SELECT ValidaRegistros('lol exd',456 );


CREATE INDEX mytable_cat_1 ON mytable (data) WHERE category = 1;

CREATE INDEX access_log_client_ip_ix ON access_log (client_ip)
     WHERE NOT (client_ip > inet '192.168.100.0' ANDi2
     client_ip < inet '192.168.100.255');



CREATE DATABASE DBFase2;

USE DBFase2;

CREATE FUNCTION myFuncion(texto text) RETURNS text AS $$
BEGIN
	RETURN texto;
END;
$$ LANGUAGE plpgsql;

select myFuncion('INICIO CALIFICACION FASE 2');

CREATE TABLE tbProducto (idproducto integer not null primary key,
  						 producto varchar(150) not null,
  						 fechacreacion date not null,
						 estado integer);

CREATE UNIQUE INDEX idx_producto ON tbProducto (idproducto);

CREATE TABLE tbCalificacion (idcalifica integer not null primary key,
							 item varchar(100) not null,
							 punteo integer not null);

CREATE UNIQUE INDEX idx_califica ON tbCalificacion (idcalifica);

INSERT INTO tbProducto values(1,'Laptop Lenovo',now(),1);
INSERT INTO tbProducto values(2,'Bateria para Laptop Lenovo T420',now(),1);
INSERT INTO tbProducto values(3,'Teclado Inalambrico',now(),1);
INSERT INTO tbProducto values(4,'Mouse Inalambrico',now(),1);
INSERT INTO tbProducto values(5,'WIFI USB',now(),1);

CREATE FUNCTION ValidaRegistros(tabla varchar(50),cantidad integer) RETURNS int

AS $$
DECLARE resultado INTEGER;
		retorna   INTEGER;
BEGIN
	if tabla = 'tbProducto' then
	    resultado := (SELECT COUNT(*) FROM tbProducto);
    	if cantidad = resultado then
			retorna = 1;
		else
			retorna = 0;
		end if;
	end if;
RETURN retorna;
END;
$$ LANGUAGE plpgsql;


insert into tbCalificacion values(1,'Create Table and Insert',ValidaRegistros('tbProducto',2));

select * from tbCalificacion;



